% Garante modo numerico do abnTeX2 para sincronizar com o estilo bibliografico
\PassOptionsToPackage{num}{abntex2cite}
\documentclass[11pt]{relatorio_tcc_ads_ifba}
\usepackage{float}
\begin{document}

% Aluno/autor do documento (obrigatório)
% e.g. \aluno{Luiz Felipe Torres Farias}
\aluno{Pedro Batista de Almeida Filho}

% Titulo do seu projeto (obrigatório)
% e.g. \titulo{Desenvolvimento de Software XPTO}
\titulo{Tô De Olho: Democratizando a Transparência do Senado Federal através de Dados Abertos}

% Data da sua defesa (obrigatório)
% e.g. \date{21 de janeiro de 2024}
\date{Fevereiro de 2026}

% Orientador (obrigatório)
% Opção: [f] para orientadora. O valor default é [m]
% e.g. \orientador[f]{Flavia Maristela}
% e.g. \orientador{Frederico Barboza}
\orientador{Pablo Vieira Florentino}

% Coorientador (opcional)
% Opção: [f] para coorientadora. O valor default é [m]. Caso não possua coorientador, comentar ou deletar essa linha.
% e.g. \orientador[f]{Flavia Maristela}
% e.g. \orientador{Frederico Barboza}
% \coorientador{NOME}
%\coorientador{}

% Pretextual (obrigatório)
% Comando responsável por imprimir o conteúdo pré-textual (capa e sumário)
\pretextual

% ---------------------------------------------------------------------
% INÍCIO DA PARTE ESCRITA 
% ---------------------------------------------------------------------
\section{Visão geral }

O \textit{Tô De Olho} é uma plataforma \textit{web} de transparência parlamentar focada no Senado Federal. Sua proposta é aproximar cidadãos dos dados legislativos oficiais, convertendo informação dispersa em conhecimento fiscalizável. O projeto vai além dos dados abertos básicos, integrando fontes complexas como a Cota para o Exercício da Atividade Parlamentar dos Senadores (CEAPS) e as "emendas PIX". Ao combinar arquitetura de \textit{microservices}, ingestão híbrida (API do Senado, Scrapers e Portal da Transparência) e um front-end em Next.js 15, a plataforma busca reduzir a assimetria de informação sobre os 81 senadores da República \cite{Gomes2010}.

A literatura de democracia digital evidencia que TICs ampliam possibilidades de participação, mas só geram valor quando articuladas a contextos de uso e inclusão. Avelino et al. mapeiam iniciativas de dados abertos, reforçando que tecnologias precisam ser mediadas por visualizações claras para efetivação do controle social \cite{avelino2021democracia}. Com um corpo legislativo menor e mais "caro" per capita que a Câmara, o Senado carece de ferramentas focadas que cruzem votações nominais com a execução orçamentária de emendas. À luz desses estudos, o \textit{Tô De Olho} procura transformar a transparência passiva em *accountability* ativa, oferecendo rankings e métricas objetivas de desempenho parlamentar \cite{pateman1970, gomes2019}.

% Recomendo manter cada seção ou subseção de texto em um arquivo separado e depois utilizados com o comando include, conforme o exemplo a seguir. Porém, se preferir, também pode deixar seu texto neste arquivo
\input{src/sections/objetivos}
%\input{src/sections/definicoes}

\subsection{Declaração do Problema}

Embora o Senado Federal disponibilize dados via API e Portal da Transparência, estas fontes sofrem de fragmentação. A API de Dados Abertos Legislativa foca no processo legislativo (matérias, votações), enquanto a API Administrativa contém dados da CEAPS em formato estruturado. Contudo, informações de remuneração de gabinete são disponibilizadas apenas em arquivos CSV dinâmicos. Além disso, a recente explosão das "Emendas PIX" (Transferências Especiais) criou um vácuo de transparência, onde o rastro do dinheiro público se perde. Sem uma ferramenta que consolide mandato, gastos de gabinete e destinação de emendas em uma visão unificada, o cidadão não possui insumos para avaliar qualitativamente seus representantes \cite{avelino2021democracia}.

\subsection{Proposta de Solução de Software}

O \textit{Tô De Olho} é uma plataforma \textit{web} concebida para centralizar a fiscalização do Senado Federal. A solução integra múltiplas APIs oficiais e utiliza \textit{crawlers} apenas para dados não estruturados (como remuneração de gabinete), agregando informações de três dimensões do mandato: Atividade Legislativa, Gestão de Recursos (CEAPS) e Articulação Orçamentária (Emendas).

A plataforma centraliza informações sobre os 81 senadores, incluindo:

\begin{itemize}
    \item \textbf{Ranking de Desempenho}: avaliação baseada em métricas objetivas como assiduidade, economia de cota e fidelidade partidária;
    \item \textbf{Raio-X da CEAPS}: análise detalhada dos gastos com passagens, divulgação e consultorias, identificando padrões de uso;
    \item \textbf{Rastreio de Emendas}: cruzamento de dados do Portal da Transparência para evidenciar o destino das emendas parlamentares, com foco nas modalidades de transferência especial.
\end{itemize}

O sistema atua como um "auditor digital", automatizando o cruzamento de dados que, manualmente, seria inviável para o eleitor comum.

\subsection{Tecnologias adotadas}

A arquitetura do \textit{Tô De Olho} foi projetada seguindo o padrão de \textit{microservices}, escolhido por sua escalabilidade, manutenibilidade e resiliência. As principais tecnologias adotadas são:

\textbf{Backend:}
\begin{itemize}
    \item \textbf{Golang}: linguagem escolhida para os serviços de ingestão e API, ideal para processamento concorrente de grandes volumes de dados (ETL dos CSVs de despesas);
    \item \textbf{PostgreSQL}: banco de dados relacional para persistência estruturada (Senadores, Votações, Despesas);
    \item \textbf{Redis}: cache para rankings e totalizadores de gastos;
    \item \textbf{Go-Colly}: framework de \textit{web scraping} para captura de dados não estruturados (ex: sites de detalhes de emendas quanto necessário).
\end{itemize}

\textbf{Frontend:}
\begin{itemize}
    \item \textbf{Next.js 15}: (App Router) para renderização eficiente e SEO;
    \item \textbf{Recharts}: biblioteca para visualização de dados (gráficos de evolução de gastos);
    \item \textbf{Tailwind CSS}: estilização responsiva.
\end{itemize}

\textbf{Infraestrutura e DevOps:}
\begin{itemize}
    \item \textbf{Docker}: containerização;
    \item \textbf{Google Cloud Run / GKE}: orquestração serverless/container;
    \item \textbf{GitHub Actions}: CI/CD.
\end{itemize}

\textbf{Fontes de Dados:}
\begin{itemize}
    \item \textbf{API do Senado Federal}: dados legislativos (votações, matérias);
    \item \textbf{Portal Administrativo do Senado}: fontes de arquivos CSV para a CEAPS;
    \item \textbf{API do Portal da Transparência (CGU)}: dados de emendas parlamentares e transferências da união.
\end{itemize}

\subsection{Trabalhos Relacionados - A FAZER}

Diversas iniciativas no Brasil e no mundo buscam promover a transparência política por meio da tecnologia. Entre os trabalhos relacionados, destacam-se:

\textbf{Portal da Transparência (CGU):} Principal ferramenta oficial do governo federal para transparência, disponibiliza dados sobre gastos públicos, servidores e convênios. Embora abrangente, sua interface é voltada para consultas técnicas e não oferece visualizações consolidadas por parlamentar.

\textbf{Portal de Dados Abertos da Câmara:} Fonte oficial dos dados legislativos, oferece API e arquivos para download. Contudo, exige conhecimento técnico para consumo e não provê interpretação ou contextualização das informações.

\textbf{Ranking dos Políticos:} Iniciativa da sociedade civil que avalia parlamentares com base em critérios predefinidos. Diferencia-se do \textit{Tô De Olho} por adotar uma abordagem de \textit{ranking} com critérios fixos, enquanto nossa plataforma permite que o próprio cidadão analise os dados e forme sua opinião.

\textbf{Serenata de Amor:} Projeto de \textit{data science} que utiliza inteligência artificial para detectar irregularidades em gastos parlamentares. Foca em análise automatizada de anomalias, enquanto o \textit{Tô De Olho} prioriza a apresentação acessível dos dados para fiscalização cidadã direta.

\textbf{Diferencial do Tô De Olho:} Nossa solução se diferencia por: (1) consolidar múltiplas fontes de dados em uma interface única e acessível; (2) utilizar arquitetura de microsserviços escalável para suportar picos de acesso em períodos eleitorais; (3) focar na experiência do usuário leigo, seguindo princípios de acessibilidade (WCAG 2.1).

% Fundamentação Teórica - Conceitos base do projeto
\input{src/sections/fundamentacao}

% Metodologia - Abordagem de desenvolvimento e arquitetura
\input{src/sections/metodologia}

\section{Requisitos}

\subsection{Requisitos Funcionais}

\textbf{Módulo de Senadores:}
\begin{itemize}
    \item \textbf{[RF01]} O sistema deve apresentar a lista atualizada dos 81 senadores com foto, partido e estado.
    \item \textbf{[RF02]} O sistema deve permitir a busca de senadores por nome, sigla partidária ou UF.
    \item \textbf{[RF03]} O sistema deve exibir o "Score" do senador baseado no algoritmo de ranking do projeto.
\end{itemize}

\textbf{Módulo de Transparência Financeira (CEAPS):}
\begin{itemize}
    \item \textbf{[RF04]} O sistema deve importar os lançamentos da Cota Parlamentar (CEAPS) através de arquivos CSV/Dados Abertos.
    \item \textbf{[RF05]} O sistema deve permitir visualizar o gasto acumulado por tipo de despesa (passagens, correios, consultorias).
    \item \textbf{[RF06]} O sistema deve exibir os fornecedores que mais receberam recursos de um determinado senador.
\end{itemize}

\textbf{Módulo de Emendas e Orçamento:}
\begin{itemize}
    \item \textbf{[RF07]} O sistema deve integrar com o Portal da Transparência para buscar emendas de autoria do senador.
    \item \textbf{[RF08]} O sistema deve destacar valores destinados via "Transferências Especiais" (emendas PIX).
\end{itemize}

\textbf{Módulo de Atividade Legislativa:}
\begin{itemize}
    \item \textbf{[RF09]} O sistema deve listar as votações nominais recentes e o voto de cada senador (Sim/Não/Abstenção).
\end{itemize}

\subsection{Requisitos Não-Funcionais}

\textbf{Desempenho:}
\begin{itemize}
    \item \textbf{[RNF01]} O sistema deve responder a requisições de consulta em até 2 segundos sob condições normais de uso.
    \item \textbf{[RNF02]} A arquitetura deve suportar escalabilidade horizontal para lidar com picos de acesso em períodos eleitorais.
\end{itemize}

\textbf{Usabilidade e Acessibilidade:}
\begin{itemize}
    \item \textbf{[RNF03]} O sistema deve ser acessível via navegadores \textit{web} em dispositivos \textit{desktop} e \textit{mobile}.
    \item \textbf{[RNF04]} A interface deve seguir o padrão \textit{mobile-first} para garantir boa experiência em dispositivos móveis.
    \item \textbf{[RNF05]} O sistema deve seguir as diretrizes de acessibilidade WCAG 2.1 nível AA.
\end{itemize}

\textbf{Confiabilidade:}
\begin{itemize}
    \item \textbf{[RNF06]} Os dados devem ser sincronizados diariamente com a API oficial da Câmara dos Deputados.
    \item \textbf{[RNF07]} O sistema deve manter disponibilidade mínima de 99\% durante o período eleitoral.
\end{itemize}

\textbf{Segurança:}
\begin{itemize}
    \item \textbf{[RNF08]} As comunicações devem ser criptografadas utilizando HTTPS/TLS.
    \item \textbf{[RNF10]} O sistema deve estar em conformidade com a LGPD (Lei Geral de Proteção de Dados).
\end{itemize}

\textbf{Manutenibilidade:}
\begin{itemize}
    \item \textbf{[RNF11]} A arquitetura de microsserviços deve permitir atualizações independentes de cada módulo.
    \item \textbf{[RNF12]} O código deve seguir padrões de desenvolvimento e estar documentado.
    \item \textbf{[RNF13]} O sistema deve possuir \textit{pipelines} de CI/CD para integração e deploy contínuos.
\end{itemize}

\section{Design}
\subsection{Projeto UML}
O projeto utiliza a Unified Modeling Language (UML) para documentar visualmente a estrutura e o comportamento do sistema. Abaixo são apresentados os diagramas essenciais para o entendimento da arquitetura proposta.

\subsubsection{Diagrama de Classes}
O Diagrama de Classes modela a estrutura estática do domínio. As principais entidades identificadas são:

\begin{itemize}
    \item \textbf{Senador}: Representa o parlamentar, contendo atributos como Identificador, Nome, Partido e Estado.
    \item \textbf{Despesa}: Representa um lançamento na CEAPS, associada a um Senador e um Fornecedor.
    \item \textbf{Votacao}: Representa uma sessão deliberativa no Plenário, composta por múltiplos Votos.
    \item \textbf{Emenda}: Representa verba orçamentária destinada pelo senador, contendo Valor, Ano e Beneficiário.
\end{itemize}

\begin{figure}[H]
    \centering
    \caption{Diagrama de Classes Simplificado (Conceitual)}
    % Placeholder para imagem
    \includegraphics[width=0.8\textwidth]{docs/diagrama_classes_placeholder.png} 
    \par\small{Fonte: Autoria Própria}
\end{figure}

\subsubsection{Diagrama de Implantação}
O sistema é implantado em nuvem (GCP), utilizando orquestração de containers.

\begin{figure}[H]
    \centering
    \caption{Diagrama de Implantação e Infraestrutura}
    % Placeholder para imagem
    \includegraphics[width=0.8\textwidth]{docs/diagrama_implantacao_placeholder.png}
    \par\small{Fonte: Autoria Própria}
\end{figure}

\subsection{Visão arquitetural}

O \textit{Tô De Olho} adota uma arquitetura de \textbf{microsserviços}, onde cada componente é responsável por um domínio específico do negócio e pode ser desenvolvido, implantado e escalado de forma independente. Essa escolha arquitetural foi motivada pelos seguintes fatores:

\begin{itemize}
    \item \textbf{Escalabilidade}: permite escalar individualmente serviços com maior demanda, como o de consulta de despesas durante períodos de maior fiscalização;
    \item \textbf{Manutenibilidade}: atualizações em um serviço (ex: despesas) não afetam os demais (ex: votações);
    \item \textbf{Resiliência}: falhas em um microsserviço não comprometem todo o sistema.
\end{itemize}

\textbf{Microsserviços Principais:}
\begin{itemize}
    \item \texttt{servico-senadores}: Core do domínio, gerencia dados cadastrais e ranking;
    \item \texttt{servico-ceaps}: Responsável pelo processamento e totalização da Cota Parlamentar (ETL dos CSVs);
    \item \texttt{servico-emendas}: Integração com API da Transparência para buscar transferências e convênios;
    \item \texttt{servico-legislativo}: Coleta dados de votações e matérias das APIs do Senado;
    \item \texttt{servico-ingestao}: Workers agendados para atualização diária dos dados.
\end{itemize}

\textbf{Estratégia de Ingestão de Dados:}

A plataforma utiliza uma estratégia híbrida de ingestão:
\begin{enumerate}
    \item \textbf{Backfill}: carga inicial histórica através de arquivos em massa (JSON/CSV) disponibilizados pela Câmara;
    \item \textbf{Sincronização Contínua}: \textit{CronJobs} diários que consomem a API RESTful v2 para manter os dados atualizados.
\end{enumerate}

\textbf{Comunicação entre Serviços:}

Os microsserviços comunicam-se através de:
\begin{itemize}
    \item \textbf{APIs REST}: para comunicação síncrona entre serviços;
    \item \textbf{Message Queue (RabbitMQ)}: para comunicação assíncrona e desacoplamento, especialmente no processo de ingestão de dados.
\end{itemize}

\textbf{Infraestrutura:}

Todos os serviços são containerizados com Docker e orquestrados pelo Kubernetes (GKE - Google Kubernetes Engine), permitindo auto-scaling, balanceamento de carga e alta disponibilidade.

\subsection{Modelo de Banco de Dados}
O modelo de dados relacional foi projetado para garantir integridade e eficiência nas consultas analíticas. As tabelas principais são:

\begin{itemize}
    \item \textbf{TB\_SENADORES}: Tabela mestre. PK: \texttt{codigo\_senado}. Colunas: nome, partido, uf, url\_foto.
    \item \textbf{TB\_MANDATOS}: Histórico de legislaturas. FK para \texttt{TB\_SENADORES}.
    \item \textbf{TB\_DESPESAS\_CEAPS}: Armazena cada nota fiscal reembolsada. FK para \texttt{TB\_SENADORES}. Colunas: valor, data, tipo\_despesa, cnpj\_fornecedor, url\_documento. Indexada por senador e ano para performance em buscas.
    \item \textbf{TB\_VOTACOES}: Cabeçalho das votações. PK: \texttt{codigo\_sessao}.
    \item \textbf{TB\_VOTOS}: Tabela de junção (\textit{many-to-many}) entre Senadores e Votações, registrando o voto individual (Sim/Não).
    \item \textbf{TB\_EMENDAS}: Registra valores destinados. Colunas: valor\_empenhado, valor\_pago, beneficiario, modalidade (ex: Pix).
\end{itemize}

\section{Testes de Software}

\subsection{Projeto de Testes}
A estratégia de qualidade do \textit{Tô De Olho} combina testes em diferentes níveis, aproveitando o ferramental nativo da linguagem Go:

\begin{itemize}
    \item \textbf{Testes Unitários}: Validam regras de negócio isoladas, como o cálculo do "Score" do senador e parsers de CSV. Implementados com o pacote padrão \texttt{testing} do Go, utilizando a técnica de \textit{Table-Driven Tests} para cobrir múltiplos cenários de borda.
    \item \textbf{Testes de Integração}: Validam a comunicação entre os componentes e o banco de dados. Utiliza-se a biblioteca \texttt{testcontainers-go} para subir instâncias efêmeras do PostgreSQL e Redis durante a execução da pipeline, garantindo que as queries e a persistência funcionem como esperado num ambiente controlado.
    \item \textbf{Testes de Contrato (API)}: Asseguram que as respostas dos serviços externos (Senado/Transparência) continuam respeitando os formatos esperados, alertando sobre "Quebras de API" em dependências externas.
\end{itemize}

\section{Implantação}
\subsection{Projeto de Implantação}
A implantação do sistema segue as práticas de \textit{GitOps} e Infraestrutura como Código.

\textbf{Ambiente de Execução:}
Os microsserviços são empacotados em imagens Docker otimizadas (\textit{multi-stage builds}) e implantados em um cluster Kubernetes (Google Kubernetes Engine - GKE). O cluster gerencia automaticamente o ciclo de vida dos containers, escalando réplicas (\textit{Horizontal Pod Autoscaling}) com base no uso de CPU/Memória.

\textbf{Pipeline de CI/CD:}
Utiliza-se GitHub Actions para automação. A cada \textit{push} na branch principal:
\begin{enumerate}
    \item \textit{Build}: Compilação dos binários Go e checagem de erros;
    \item \textit{Test}: Execução dos testes unitários e de integração;
    \item \textit{Publish}: Criação da imagem Docker e envio para o Registry (GCR);
    \item \textit{Deploy}: Atualização dos manifestos Kubernetes no cluster de produção.
\end{enumerate}

\section{Manual do Usuário Simplificado}

A plataforma é pública e não requer cadastro para consulta, maximizando a transparência.

\begin{enumerate}
    \item \textbf{Acesso}: Navegue para \url{https://todeolho.org.br}.
    \item \textbf{Ranking}: Na página inicial, visualize os "Top 3" senadores em Economia e Presença.
    \item \textbf{Busca}: Utilize a barra superior para digitar o nome de um senador.
    \item \textbf{Detalhes}: Ao clicar em um senador, navegue pelas abas "Gastos" (para ver notas fiscais detalhadas) e "Emendas" (para ver destino das verbas).
    \item \textbf{Fiscalização}: Use o botão "Compartilhar" para enviar ficha do senador nas redes sociais.
\end{enumerate}

\input{src/sections/conclusao}

\section*{Agradecimentos}
\textcolor{blue}{
    [Agradecimentos a colaboradores do seu projeto]
} \\
\textcolor{red}{[Opcional]}

\bibliography{referencias}
\textcolor{blue}{
    [Forneça uma lista completa de todos os documentos mencionados ou que foram utilizados como referência na elaboração deste documento. Todos os documentos devem ser identificados por título, data, nome e organização responsável por sua publicação. Especifique as fontes dessas referências. Utilize o padrão ABNT para o formato das referências.]
} \\
\textcolor{red}{[Obrigatório]} \\
\textbf{[Dica: insira suas referências no arquivo ``referencias.bib'' e utilize o comando ``cite'']}

\newpage
\section*{Apêndices}

\section*{Glossário, Siglas e Abreviações}
\textcolor{blue}{
[Forneça as definições de todos os termos, siglas e abreviações necessárias à compreensão deste documento.]
[Opcional]}


\end{document}
